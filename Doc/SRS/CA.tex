\documentclass[12pt]{article}

\usepackage{amsmath, mathtools}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{pdflscape}
\usepackage{afterpage}

\usepackage[round]{natbib}

%\usepackage{refcheck}

\hypersetup{
    bookmarks=true,         % show bookmarks bar?
      colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links (change box color with linkbordercolor)
    citecolor=green,        % color of links to bibliography
    filecolor=magenta,      % color of file links
    urlcolor=cyan           % color of external links
}

\input{../Comments}

% For easy change of table widths
\newcommand{\colZwidth}{1.0\textwidth}
\newcommand{\colAwidth}{0.13\textwidth}
\newcommand{\colBwidth}{0.82\textwidth}
\newcommand{\colCwidth}{0.1\textwidth}
\newcommand{\colDwidth}{0.05\textwidth}
\newcommand{\colEwidth}{0.8\textwidth}
\newcommand{\colFwidth}{0.17\textwidth}
\newcommand{\colGwidth}{0.5\textwidth}
\newcommand{\colHwidth}{0.28\textwidth}

% Used so that cross-references have a meaningful prefix
\newcounter{defnum} %Definition Number
\newcommand{\dthedefnum}{GD\thedefnum}
\newcommand{\dref}[1]{GD\ref{#1}}
\newcounter{datadefnum} %Datadefinition Number
\newcommand{\ddthedatadefnum}{DD\thedatadefnum}
\newcommand{\ddref}[1]{DD\ref{#1}}
\newcounter{theorynum} %Theory Number
\newcommand{\tthetheorynum}{T\thetheorynum}
\newcommand{\tref}[1]{T\ref{#1}}
\newcounter{tablenum} %Table Number
\newcommand{\tbthetablenum}{T\thetablenum}
\newcommand{\tbref}[1]{TB\ref{#1}}
\newcounter{assumpnum} %Assumption Number
\newcommand{\atheassumpnum}{P\theassumpnum}
\newcommand{\aref}[1]{A\ref{#1}}
\newcounter{goalnum} %Goal Number
\newcommand{\gthegoalnum}{P\thegoalnum}
\newcommand{\gsref}[1]{GS\ref{#1}}
\newcounter{instnum} %Instance Number
\newcommand{\itheinstnum}{IM\theinstnum}
\newcommand{\iref}[1]{IM\ref{#1}}
\newcounter{reqnum} %Requirement Number
\newcommand{\rthereqnum}{P\thereqnum}
\newcommand{\rref}[1]{R\ref{#1}}
\newcounter{lcnum} %Likely change number
\newcommand{\lthelcnum}{LC\thelcnum}
\newcommand{\lcref}[1]{LC\ref{#1}}

\newcommand{\famname}{rkf45.ml} % PUT YOUR PROGRAM NAME HERE

\usepackage{fullpage}

\begin{document}

\title{RKF45 Generator} 
\author{Alexander Schaap}
\date{\today}

\maketitle

~\newpage

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
\today & 1.0 & Initial version\\
\bottomrule
\end{tabularx}

~\newpage
	
\section{Reference Material}

This section records information for easy reference.

\subsection{Table of Units}

Since the application of this software is dependent on the program using the 
functions provided by this program family, no physical units are used 
throughout this document.

\subsection{Table of Symbols}

The table that follows summarizes the symbols used in this document along with
their units.  The choice of symbols was made to be consistent with the heat
transfer literature and with existing documentation for solar water heating
systems.  The symbols are listed in alphabetical order.

\renewcommand{\arraystretch}{1.2}
%\noindent \begin{tabularx}{1.0\textwidth}{l l X}
\noindent \begin{longtable*}{l l p{12cm}} \toprule
\textbf{symbol} & \textbf{unit} & \textbf{description}\\
\midrule 
$A_C$ & \si[per-mode=symbol] {\square\metre} & coil surface area
\\
$A_\text{in}$ & \si[per-mode=symbol] {\square\metre} & surface area over 
which heat is transferred in
\\ 
\bottomrule
\end{longtable*}
\wss{Use your problems actual symbols.  The si package is a good idea to use for
  units.}

\subsection{Abbreviations and Acronyms}

\renewcommand{\arraystretch}{1.2}
\begin{tabular}{l l} 
  \toprule		
  \textbf{symbol} & \textbf{description}\\
  \midrule 
  A & Assumption\\
  DD & Data Definition\\
  GD & General Definition\\
  GS & Goal Statement\\
  IM & Instance Model\\
  LC & Likely Change\\
  PS & Physical System Description\\
  R & Requirement\\
  SRS & Software Requirements Specification\\
  \famname{} & Family of programs based on the RK4 / RKF45 method(s)\\
  T & Theoretical Model\\
  \bottomrule
\end{tabular}\\

\wss{Add any other abbreviations or acronyms that you add}

\newpage

\tableofcontents

~\newpage

\pagenumbering{arabic}

\section{Introduction}

This document provides an overview of the commonality analysis (CA) for the 
rkf45.ml program family. This program family calculates approximations in the 
form of splines to given ordinary differential equations (ODEs) using a 
fourth-order Runge-Kutta / Runge-Kutta-Fehlberg method. It does most of this at 
compile-time, generating a different family member for each given combination 
of ODE, interval, step size, and initial values. The current section describes 
the purpose of this document, the scope of this family, the organization of the 
remainder of the document and the characteristics of the intended reader.

\subsection{Purpose of Document}
The main purpose of this document is to provide sufficient information to 
understand what rkf45.ml does. The goals and theoretical models used in the 
rkf45.ml implementations are provided, as are assumptions and unambiguous 
definitions.

\subsection{Scope of the Family}

The responsibility of the family is solving the provided ODEs for given 
intervals, initial values and step sizes. The user will have to ensure the RK4 
method is best for their particular problem(s), and they will have to ensure 
appropriate input is provided (see \ref{ssec:Assumptions} for some starting 
points). Additionally, the user will also have to process the output 
appropriately.

\subsection{Characteristics of Intended Reader} 
The reader is expected to have some undergraduate STEM and functional 
programming background. Ideally, they have been exposed to some calculus and 
programming courses.

\subsection{Organization of Document}

The organization of this document follows the template for a commonality 
analysis (CA) provided by Dr. W. S. Smith, which is in turn based on the SRS 
template proposed in \als{TODO:cites, document structure}

\section{General System Description}

This section identifies the interfaces between the system and its environment,
describes the potential user characteristics and lists the potential system
constraints.

\subsection{Potential System Contexts}

\wss{Your system context will likely include an explicit list of user and system
  responsibilities}

\begin{itemize}
\item User Responsibilities:
\begin{itemize}
\item Provide a non-stiff continuous ODE to \famname{} for which an accurate 
solution can be obtained using RK4 (see T\ref{T_RK4})
\item Correctly process the resulting interpolated spline function
\end{itemize}
\item \famname{} Responsibilities:
\begin{itemize}
\item Generate (in a type-safe manner) a family member which contains a 
spline that approximates the given ODE.
\item 
\end{itemize}
\end{itemize}

\subsection{Potential User Characteristics} \label{SecUserCharacteristics}

The most common user of \famname{} will be other programs. However, one or more 
programmers are needed to write the code that calls the function(s) provided by 
this family.

These programmers therefore should have an understanding of undergraduate Level
1 Calculus.

\subsection{Potential System Constraints}

The responsibility of generating family members in a type-safe way restricts 
the system to the MetaOCaml extension of the OCaml programming language.

\section{Commonalities}

\subsection{Background Overview} \label{Sec_Background}

There are various numerical methods for approximating ordinary differential 
equation (ODE), such as the Runge-Kutta methods (which include Euler's method).

\subsection{Terminology and  Definitions}

This subsection provides a list of terms that are used in the subsequent
sections and their meaning, with the purpose of reducing ambiguity and making it
easier to correctly understand the requirements:

\begin{itemize}

\item 

\end{itemize}

\subsection{Data Definitions} \label{sec_datadef}

This section collects and defines all the data needed to build the instance
models. The dimension of each quantity is also given.  \wss{Modify the examples
  below for your problem, and add additional definitions as appropriate.}

~\newline

\noindent
\begin{minipage}{\textwidth}
\renewcommand*{\arraystretch}{1.5}
\begin{tabular}{| p{\colAwidth} | p{\colBwidth}|}
\hline
\rowcolor[gray]{0.9}
Number& DD\refstepcounter{datadefnum}\thedatadefnum \label{DD_ODE}\\
\hline
Label& \bf Ordinary Differential Equation (ODE)\\
\hline
Symbol &${\bf f}$\\
\hline
 Units& $\mathbb{R} \times \mathbb{C}^n \rightarrow \mathbb{C}^n$\\
 \hline
%  SI Units & \si{\watt\per\square\metre}\\
%  \hline
  Equation&${\bf x'} = {\bf f} (t,{\bf x} (t))$\\
  \hline
  Description & 
                 ${\bf f}$ is the equation for which we ultimately want to find 
                 a numerical approximation.
  \\
  \hline
  Sources&~\cite{Corless???}  \\
  \hline
  Ref.\ By & \iref{ewat}\\
  \hline
\end{tabular}
\end{minipage}\\

~\newline

\noindent
\begin{minipage}{\textwidth}
    \renewcommand*{\arraystretch}{1.5}
    \begin{tabular}{| p{\colAwidth} | p{\colBwidth}|}
        \hline
        \rowcolor[gray]{0.9}
        Number& DD\refstepcounter{datadefnum}\thedatadefnum 
        \label{DD_initialvalues}\\
        \hline
        Label& \bf Initial values\\
        \hline
        Symbol &$a, b$\\
        \hline
        Units& $\mathbb{R} \times \mathbb{R}$\\
        \hline
        %  SI Units & \si{\watt\per\square\metre}\\
        %  \hline
        Equation&\\
        \hline
        Description & 
        The interval for which to solve the ODE (see \ddref{DD_ODE}). $a$ 
        represents the beginning of the interval, $b$ the end.
        \\
        \hline
        Sources&~\cite{Corless???}  \\
        \hline
        Ref.\ By & \iref{ewat}\\
        \hline
    \end{tabular}
\end{minipage}\\

~\newline

\noindent
\begin{minipage}{\textwidth}
    \renewcommand*{\arraystretch}{1.5}
    \begin{tabular}{| p{\colAwidth} | p{\colBwidth}|}
        \hline
        \rowcolor[gray]{0.9}
        Number& DD\refstepcounter{datadefnum}\thedatadefnum 
        \label{DD_interval}\\
        \hline
        Label& \bf Interval\\
        \hline
        Symbol & ${\bf x}_0$\\
        \hline
        Units& $\mathbb{C}^n$\\
        \hline
        %  SI Units & \si{\watt\per\square\metre}\\
        %  \hline
        Equation& ${\bf x}(t_0) = {\bf x}_0$\\
        \hline
        Description & 
        Initial values for solving ODE (see \ddref{DD_ODE}).
        \\
        \hline
        Sources&~\cite{Corless???}  \\
        \hline
        Ref.\ By & \iref{ewat}\\
        \hline
    \end{tabular}
\end{minipage}\\

~\newline

\noindent
\begin{minipage}{\textwidth}
    \renewcommand*{\arraystretch}{1.5}
    \begin{tabular}{| p{\colAwidth} | p{\colBwidth}|}
        \hline
        \rowcolor[gray]{0.9}
        Number& DD\refstepcounter{datadefnum}\thedatadefnum 
        \label{DD_stepsize}\\
        \hline
        Label& \bf Step size\\
        \hline
        Symbol & $h$ \\
        \hline
        Units& $\mathbb{R}$ \\
        \hline
        %  SI Units & \si{\watt\per\square\metre}\\
        %  \hline
        Equation& \\
        \hline
        Description & 
        Size of the steps between the opints for which to find approximations 
        using RK4 (\tref{T_RK4}).
        \\
        \hline
        Sources&~\cite{Carette???}  \\
        \hline
        Ref.\ By & \iref{ewat}\\
        \hline
    \end{tabular}
\end{minipage}\\

\subsection{Goal Statements}

\noindent Given the non-stiff continuous ODE, the goal statements are:

\begin{itemize}

\item[GS\refstepcounter{goalnum}\thegoalnum \label{G_meaningfulLabel}:] Given 
an interval and the desired number of knots, as well as an initial value, 
calculate a spline and return a function that uses this spline to solve for 
specific points on the provided interval.

\end{itemize}

\subsection{Theoretical Models} \label{sec_theoretical}

This section focuses on the general equations and laws that \famname{} is based
on.  \wss{Modify the examples below for your problem, and add additional models
  as appropriate.}

~\newline

\noindent
\begin{minipage}{\textwidth}
\renewcommand*{\arraystretch}{1.5}
\begin{tabular}{| p{\colAwidth} | p{\colBwidth}|}
  \hline
  \rowcolor[gray]{0.9}
  Number& T\refstepcounter{theorynum}\thetheorynum \label{T_IVP}\\
  \hline
  Label&\bf Initial value problem (IVP)\\
  \hline
  Equation&  ${\bf x'} = {\bf f} (t,{\bf x} (t))$, \quad ${\bf 
  x}(t_0) = {\bf x}_0$ \quad
    where 
    \begin{itemize}
        \item ${\bf x} : \mathbb{R} \rightarrow \mathbb{C}^n$ is the 
    vector solution as a function of time
        \item ${\bf x}_0 \in 
        \mathbb{C}^n$ is the initial condition (see \ddref{DD_initialvalues})
        \item ${\bf f} : 
    \mathbb{R} \times \mathbb{C}^n \rightarrow \mathbb{C}^n$ is the function 
    describing the vector field (see \ddref{DD_ODE})
   \end{itemize} 
   Given an initial value ${\bf x}_0$, the goal is to find approximations on a 
   given interval $[t_a .. t_b]$.\\
  \hline
  Description & 
                The standard form of an initial value problem is given above. 
                The issue is that many IVPs are difficult to solve manually (or 
                programmatically) and the correct solutions are often unknown. 
                Numerical methods are close enough to be used in most 
                applications.\\
  \hline
  Source &
           \cite{corless_graduate_2013} p. 510, 513\\
  % The above web link should be replaced with a proper citation to a publication
  \hline
  Ref.\ By & \dref{ROCT}\\
  \hline
\end{tabular}
\end{minipage}\\


\section{Variabilities}

\noindent
\begin{minipage}{\textwidth}
    \renewcommand*{\arraystretch}{1.5}
    \begin{tabular}{| p{\colAwidth} | p{\colBwidth}|}
        \hline
        \rowcolor[gray]{0.9}
        Number& IM\refstepcounter{instnum}\theinstnum \label{T_RK4}\\
        \hline
        Label&\bf Fourth order Runge-Kutta method (RK4)\\
        \hline
        Equation&  
        \begin{itemize}
            \item $t_1 = t_0 + h$
            \item ${\bf k}_1 = {\bf f} (t_0, {\bf x}_0)$ slope at $x_0$
            \item ${\bf k}_2 = {\bf f} (t_0 + \dfrac{h}{2}, {\bf x}_0 + 
            \dfrac{h}{2} {\bf k}_1)$ slope of the point halfway between $t_0$ 
            and $t_1$ when extrapolating slope ${\bf k}_1$ from point ${\bf 
                x}_0$
            \item ${\bf k}_3 = {\bf f} (t_0 + \dfrac{h}{2}, {\bf x}_0 + 
            \dfrac{h}{2} {\bf k}_2)$ slope of the point halfway between $t_0$ 
            and $t_1$ when extrapolating slope ${\bf k}_2$ from point ${\bf 
                x}_0$
            \item ${\bf k}_4 = {\bf f} (t_0 + h, {\bf x}_0 + 
            h {\bf k}_3)$ slope of point at $t_1$ when extrapolating slope 
            ${\bf k}_3$ from point ${\bf x}_0$
            \item ${\bf x}_1 = {\bf x}_0 + \dfrac{h}{6} ( {\bf k}_1 + 2 {\bf 
                k}_2 + 2 {\bf k}_3 + {\bf k}_4)$ new point created when 
            extrapolating from point ${\bf x}_0$ using a weighted average of 
            the previously calculated slopes
            
        \end{itemize}\\
        \hline
        Description & 
        The above equations can be used to calculate (an approximation of) a 
        new point given the previous or starting point.\\
        \hline
        Source &
        \cite{corless_graduate_2013} p. 618\\
        % The above web link should be replaced with a proper citation to a 
        %publication
        \hline
        Ref.\ By & \dref{ROCT}\\
        \hline
    \end{tabular}
\end{minipage}\\

~\newline
\noindent
\begin{minipage}{\textwidth}
    \renewcommand*{\arraystretch}{1.5}
    \begin{tabular}{| p{\colAwidth} | p{\colBwidth}|}
        \hline
        \rowcolor[gray]{0.9}
        Number & IM\refstepcounter{instnum}\theinstnum \label{IM_RK2}\\
        \hline
        Label &\bf Second-order Runge-Kutta method (Improved Euler method)\\
        \hline
        Equations &  
        \begin{itemize}
            \item ${\bf Y}_1 = {\bf x}_k + h {\bf f} (t_k + {\bf x}_k)$
            \item ${\bf x}_{k+1} = {\bf x}_k + h \Big( \dfrac{1}{2} {\bf f} 
            (t_k,{\bf x}_k) + \dfrac{1}{2} {\bf f} (t_{k+1}, {\bf Y}_1) \Big)$
        \end{itemize}\\
        \hline
        Description & 
        The above equations can be used to calculate (an approximation of) a 
        new point given the previous or starting point.\\
        \hline
        Source &
        \cite{corless_graduate_2013} p. 616 \\
        % The above web link should be replaced with a proper citation to a 
        %publication
        \hline
        Ref.\ By & \dref{ROCT}\\
        \hline
    \end{tabular}
\end{minipage}\\

~\newline

\subsection{Assumptions}\label{ssec:Assumptions}

\begin{itemize}

\item[A\refstepcounter{assumpnum}\theassumpnum \label{A_meaningfulLabel}:]
  \wss{Short description of each assumption.  Each assumption
    should have a meaningful label.  Use cross-references to identify the
    appropriate traceability to T, GD, DD etc., using commands like dref, ddref 
    etc.}
\item[A\refstepcounter{assumpnum}\theassumpnum \label{A_initialvaluesata}:] The 
given initial values (\ddref{DD_initialvalues}) are for the beginning of the 
interval (\ddref{DD_interval}), represented by $a$.

\item[A\refstepcounter{assumpnum}\theassumpnum \label{A_initialvalues}:] 
Initial value vector size is expected to match the ones produced by the ODE 
(\ddref{DD_ODE}).

\item[A\refstepcounter{assumpnum}\theassumpnum \label{A_interval}:] The 
interval's bounds satisfy $a \leq b$.

\end{itemize}

\subsection{Calculation} \label{sec_Calculation}

\subsection{Output} \label{sec_Output}    

\section{Traceability Matrices and Graphs}

\wss{You will have to add tables.}

\newpage

\bibliographystyle {plainnat}
\bibliography {../References,../ReferencesA}

%\newpage
%
%\section{Appendix}
%
%\wss{Your report may require an appendix.  For instance, this is a good point 
%to
%show the values of the symbolic parameters introduced in the report.}
%
%\subsection{Symbolic Parameters}
%
%\wss{The definition of the requirements will likely call for 
%SYMBOLIC\_CONSTANTS.
%Their values are defined in this section for easy maintenance.}

\end{document}